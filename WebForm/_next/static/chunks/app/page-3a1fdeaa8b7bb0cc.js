(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{30285:(e,a,t)=>{"use strict";t.d(a,{$:()=>d,r:()=>o});var r=t(95155),l=t(12115),i=t(99708),n=t(74466),s=t(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,a)=>{let{className:t,variant:l,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,r.jsx)(u,{className:(0,s.cn)(o({variant:l,size:n,className:t})),ref:a,...c})});d.displayName="Button"},40283:(e,a,t)=>{"use strict";t.d(a,{A:()=>m,AuthProvider:()=>u});var r=t(95155),l=t(12115),i=t(35695),n=t(23464),s=t(87481);let o=(0,l.createContext)(void 0),d="authToken",c="authUsername";function u(e){let{children:a}=e,[t,u]=(0,l.useState)(null),[m,p]=(0,l.useState)(!0),[f,g]=(0,l.useState)(null),h=(0,i.useRouter)(),{toast:b}=(0,s.dj)();(0,l.useEffect)(()=>{p(!0);try{let e=localStorage.getItem(d),a=localStorage.getItem(c);e&&a&&u({token:e,username:a})}catch(e){console.error("Failed to load auth state from localStorage",e),localStorage.removeItem(d),localStorage.removeItem(c)}finally{p(!1)}},[]);let y=(0,l.useCallback)(async(e,a)=>{p(!0),g(null);try{let t=new URLSearchParams;t.append("request","getToken"),t.append("username",e),t.append("password",a),t.append("expiration","60"),t.append("referer",window.location.origin),t.append("f","json");let r=await n.A.post("https://maps.raleighnc.gov/portal/sharing/rest/generatetoken",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(r.data.token){let a=r.data.token;u({username:e,token:a}),localStorage.setItem(d,a),localStorage.setItem(c,e),b({title:"Login Successful",description:"Welcome back!"}),h.push("/")}else if(r.data.error){let e=r.data.error.details,a=Array.isArray(e)?e.join(" "):e||"Invalid username or password.";g(a),b({variant:"destructive",title:"Login Failed",description:a})}else g("Login failed. An unknown error occurred."),b({variant:"destructive",title:"Login Failed",description:"Login failed. An unknown error occurred."})}catch(a){var t,r,l;console.error("Login error:",a);let e=(null==(l=a.response)||null==(r=l.data)||null==(t=r.error)?void 0:t.message)||a.message||"Login failed. Please try again.";g(e),b({variant:"destructive",title:"Login Failed",description:e})}finally{p(!1)}},[h,b]),x=(0,l.useCallback)(async()=>{p(!0),u(null),localStorage.removeItem(d),localStorage.removeItem(c),b({title:"Logged Out",description:"You have been successfully logged out."}),h.push("/login"),p(!1)},[h,b]);return(0,r.jsx)(o.Provider,{value:{currentUser:t,loading:m,error:f,login:y,logout:x},children:a})}function m(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},44921:(e,a,t)=>{Promise.resolve().then(t.bind(t,98865))},59434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>i});var r=t(52596),l=t(39688);function i(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.QP)((0,r.$)(a))}},62523:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var r=t(95155),l=t(12115),i=t(59434);let n=l.forwardRef((e,a)=>{let{className:t,type:l,...n}=e;return(0,r.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...n})});n.displayName="Input"},66695:(e,a,t)=>{"use strict";t.d(a,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>s,wL:()=>u});var r=t(95155),l=t(12115),i=t(59434);let n=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let s=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...l})});s.displayName="CardHeader";let o=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...l})});d.displayName="CardDescription";let c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",t),...l})});c.displayName="CardContent";let u=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t),...l})});u.displayName="CardFooter"},75937:(e,a,t)=>{"use strict";t.d(a,{lV:()=>u,MJ:()=>y,zB:()=>p,eI:()=>h,lR:()=>b,C5:()=>x});var r=t(95155),l=t(12115),i=t(99708),n=t(62177),s=t(59434),o=t(40968);let d=(0,t(74466).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(o.b,{ref:a,className:(0,s.cn)(d(),t),...l})});c.displayName=o.b.displayName;let u=n.Op,m=l.createContext({}),p=e=>{let{...a}=e;return(0,r.jsx)(m.Provider,{value:{name:a.name},children:(0,r.jsx)(n.xI,{...a})})},f=()=>{let e=l.useContext(m),a=l.useContext(g),{getFieldState:t,formState:r}=(0,n.xW)(),i=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:s}=a;return{id:s,name:e.name,formItemId:"".concat(s,"-form-item"),formDescriptionId:"".concat(s,"-form-item-description"),formMessageId:"".concat(s,"-form-item-message"),...i}},g=l.createContext({}),h=l.forwardRef((e,a)=>{let{className:t,...i}=e,n=l.useId();return(0,r.jsx)(g.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:a,className:(0,s.cn)("space-y-2",t),...i})})});h.displayName="FormItem";let b=l.forwardRef((e,a)=>{let{className:t,...l}=e,{error:i,formItemId:n}=f();return(0,r.jsx)(c,{ref:a,className:(0,s.cn)(i&&"text-destructive",t),htmlFor:n,...l})});b.displayName="FormLabel";let y=l.forwardRef((e,a)=>{let{...t}=e,{error:l,formItemId:n,formDescriptionId:s,formMessageId:o}=f();return(0,r.jsx)(i.DX,{ref:a,id:n,"aria-describedby":l?"".concat(s," ").concat(o):"".concat(s),"aria-invalid":!!l,...t})});y.displayName="FormControl",l.forwardRef((e,a)=>{let{className:t,...l}=e,{formDescriptionId:i}=f();return(0,r.jsx)("p",{ref:a,id:i,className:(0,s.cn)("text-sm text-muted-foreground",t),...l})}).displayName="FormDescription";let x=l.forwardRef((e,a)=>{var t;let{className:l,children:i,...n}=e,{error:o,formMessageId:d}=f(),c=o?String(null!=(t=null==o?void 0:o.message)?t:""):i;return c?(0,r.jsx)("p",{ref:a,id:d,className:(0,s.cn)("text-sm font-medium text-destructive",l),...n,children:c}):null});x.displayName="FormMessage"},87481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>m});var r=t(12115);let l=0,i=new Map,n=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},s=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=s(d,e),o.forEach(e=>{e(d)})}function u(e){let{...a}=e,t=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,a]=r.useState(d);return r.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},98865:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>eC});var r=t(95155),l=t(12115),i=t(90221),n=t(62177),s=t(55594),o=t(75074),d=t(30285),c=t(62523),u=t(75937),m=t(66695);let p=s.z.object({workOrderId:s.z.string().min(1,"Work Order ID is required")});function f(e){let{onSearch:a,isLoading:t}=e,l=(0,n.mN)({resolver:(0,i.u)(p),defaultValues:{workOrderId:""}});return(0,r.jsxs)(m.Zp,{className:"w-full max-w-md shadow-lg",children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{className:"text-2xl font-headline text-center",children:"Search Work Order"})}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)(u.lV,{...l,children:(0,r.jsx)("form",{onSubmit:l.handleSubmit(e=>{a(e.workOrderId)}),className:"space-y-6",children:(0,r.jsx)(u.zB,{control:l.control,name:"workOrderId",render:e=>{let{field:a}=e;return(0,r.jsxs)(u.eI,{children:[(0,r.jsx)(u.lR,{htmlFor:"workOrderId",children:"Work Order ID"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(u.MJ,{children:(0,r.jsx)(c.p,{id:"workOrderId",placeholder:"Enter Work Order ID",...a,"aria-label":"Work Order ID"})}),(0,r.jsxs)(d.$,{type:"submit",disabled:t,"aria-label":"Search Work Order",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),t?"Searching...":"Search"]})]}),(0,r.jsx)(u.C5,{})]})}})})})})]})}var g=t(14582),h=t(79556),b=t(77381),y=t(10518),x=t(59434);let _=g.bL;g.YJ;let v=g.WT,w=l.forwardRef((e,a)=>{let{className:t,children:l,...i}=e;return(0,r.jsxs)(g.l9,{ref:a,className:(0,x.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[l,(0,r.jsx)(g.In,{asChild:!0,children:(0,r.jsx)(h.A,{className:"h-4 w-4 opacity-50"})})]})});w.displayName=g.l9.displayName;let N=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(g.PP,{ref:a,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})});N.displayName=g.PP.displayName;let j=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(g.wn,{ref:a,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})});j.displayName=g.wn.displayName;let S=l.forwardRef((e,a)=>{let{className:t,children:l,position:i="popper",...n}=e;return(0,r.jsx)(g.ZL,{children:(0,r.jsxs)(g.UC,{ref:a,className:(0,x.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,r.jsx)(N,{}),(0,r.jsx)(g.LM,{className:(0,x.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,r.jsx)(j,{})]})})});S.displayName=g.UC.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(g.JU,{ref:a,className:(0,x.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...l})}).displayName=g.JU.displayName;let F=l.forwardRef((e,a)=>{let{className:t,children:l,...i}=e;return(0,r.jsxs)(g.q7,{ref:a,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(g.VF,{children:(0,r.jsx)(y.A,{className:"h-4 w-4"})})}),(0,r.jsx)(g.p4,{children:l})]})});F.displayName=g.q7.displayName,l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(g.wv,{ref:a,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",t),...l})}).displayName=g.wv.displayName;var k=t(20547);let T=k.bL,V=k.l9,A=l.forwardRef((e,a)=>{let{className:t,align:l="center",sideOffset:i=4,...n}=e;return(0,r.jsx)(k.ZL,{children:(0,r.jsx)(k.UC,{ref:a,align:l,sideOffset:i,className:(0,x.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});A.displayName=k.UC.displayName;var D=t(965),C=t(73158),I=t(43900);function E(e){let{className:a,classNames:t,showOutsideDays:l=!0,...i}=e;return(0,r.jsx)(I.hv,{showOutsideDays:l,className:(0,x.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,x.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,x.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{className:a,...t}=e;return(0,r.jsx)(D.A,{className:(0,x.cn)("h-4 w-4",a),...t})},IconRight:e=>{let{className:a,...t}=e;return(0,r.jsx)(C.A,{className:(0,x.cn)("h-4 w-4",a),...t})}},...i})}E.displayName="Calendar";var z=t(51920),R=t(50172),O=t(75066),P=t(18018),q=t(73672),W=t(31949),L=t(83343),M=t(83013),U=t(23478);let Y=U.bL,H=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(U.q7,{ref:a,className:(0,x.cn)("border-b",t),...l})});H.displayName="AccordionItem";let J=l.forwardRef((e,a)=>{let{className:t,children:l,...i}=e;return(0,r.jsx)(U.Y9,{className:"flex",children:(0,r.jsxs)(U.l9,{ref:a,className:(0,x.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...i,children:[l,(0,r.jsx)(h.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});J.displayName=U.l9.displayName;let B=l.forwardRef((e,a)=>{let{className:t,children:l,...i}=e;return(0,r.jsx)(U.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,r.jsx)("div",{className:(0,x.cn)("pb-4 pt-0",t),children:l})})});B.displayName=U.UC.displayName;var Z=t(4884);let G=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)(Z.bL,{className:(0,x.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...l,ref:a,children:(0,r.jsx)(Z.zi,{className:(0,x.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});G.displayName=Z.bL.displayName;var $=t(34520);let X=$.bL;$.l9;let K=$.ZL,Q=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)($.hJ,{className:(0,x.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:a})});Q.displayName=$.hJ.displayName;let ee=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsxs)(K,{children:[(0,r.jsx)(Q,{}),(0,r.jsx)($.UC,{ref:a,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l})]})});ee.displayName=$.UC.displayName;let ea=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,x.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};ea.displayName="AlertDialogHeader";let et=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,x.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};et.displayName="AlertDialogFooter";let er=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)($.hE,{ref:a,className:(0,x.cn)("text-lg font-semibold",t),...l})});er.displayName=$.hE.displayName;let el=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)($.VY,{ref:a,className:(0,x.cn)("text-sm text-muted-foreground",t),...l})});el.displayName=$.VY.displayName;let ei=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)($.rc,{ref:a,className:(0,x.cn)((0,d.r)(),t),...l})});ei.displayName=$.rc.displayName;let en=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,r.jsx)($.ZD,{ref:a,className:(0,x.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...l})});en.displayName=$.ZD.displayName;let es=[{value:"Yes",name:"Yes"},{value:"No",name:"No"}],eo=[{name:"objectid",alias:"OBJECTID",type:"esriFieldTypeOID",nullable:!1,editable:!1,length:4,defaultValue:null},{name:"globalid",alias:"GlobalID",type:"esriFieldTypeGlobalID",nullable:!1,editable:!1,length:38,defaultValue:null},{name:"created_user",alias:"created_user",type:"esriFieldTypeString",nullable:!0,editable:!1,length:255,defaultValue:null},{name:"created_date",alias:"created_date",type:"esriFieldTypeDate",nullable:!0,editable:!1,defaultValue:null},{name:"last_edited_user",alias:"last_edited_user",type:"esriFieldTypeString",nullable:!0,editable:!1,length:255,defaultValue:null},{name:"last_edited_date",alias:"last_edited_date",type:"esriFieldTypeDate",nullable:!0,editable:!1,defaultValue:null},{name:"workorderid",alias:"Workorder ID",type:"esriFieldTypeString",nullable:!0,editable:!1,length:256,defaultValue:null},{name:"report_date",alias:"Date and Time",type:"esriFieldTypeDate",nullable:!0,editable:!0,defaultValue:null},{name:"competent_person",alias:"Competent Person",type:"esriFieldTypeString",nullable:!0,editable:!0,length:100,defaultValue:null},{name:"signature",alias:"Signature",type:"esriFieldTypeString",nullable:!1,editable:!0,length:256,defaultValue:""},{name:"agree",alias:"I agree to discuss all hazards and share those hazards with everyone at the jobsite, as well as anyone who may arrive at the jobsite later.",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"severe_weather",alias:"Severe Weather - Do not stay in repair trailers or vehicles during adverse weather!",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"low_temperatures",alias:"Low temperatures?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"high_temperatures",alias:"High temperatures?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"asphalt_oil_vapors_resp",alias:"Asphalt (oil vapors)",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"ac_pipe_asbestos_resp",alias:"AC Pipe (asbestos)",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"concrete_silica_resp",alias:"Concrete (silica)",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"respiration_required",alias:"Respiration required?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"tamps_hear",alias:"Tamps",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"excavator_jackhammers_hear",alias:"Excavator-mounted jackhammers",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"hydraulic_chain_saws_hear",alias:"Hydraulic chain saws",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"wheel_saws_hear",alias:"Wheel saws",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"jackhammers_hear",alias:"Jackhammers",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"flushing_trucks_hear",alias:"Flushing trucks",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"vacuum_equipment_hear",alias:"Vacuum equipment",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"hearing_protection_required",alias:"Hearing protection required?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"moving_dirt_eye",alias:"Moving dirt",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"sanding_eye",alias:"Sanding",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"straw_blowing_eye",alias:"Straw blowing",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"powered_fastening_eye",alias:"Powered fastening",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"riveting_eye",alias:"Riveting",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"chiseling_eye",alias:"Chiseling",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"drilling_eye",alias:"Drilling",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"masonry_work_eye",alias:"Masonry work",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"machining_eye",alias:"Machining",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"grinding_eye",alias:"Grinding",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"chipping_eye",alias:"Chipping",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"eye_protection_required",alias:"Eye Protection Required?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"extra_visibility_vest",alias:"Extra visibility",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"near_road_vest",alias:"Working near road",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"on_the_road_vest",alias:"Working on the road",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"safety_vests_required",alias:"Safety Vests Required?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"flagging_hard_hat",alias:"Flagging",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"construction_sites_hard_hat",alias:"Construction Sites",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"overhead_powerlines_hard_hat",alias:"Overhead Powerlines",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"trenching_hard_hat",alias:"Trenching",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"excavations_hard_hat",alias:"Excavations",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"overhead_hazards_hard_hat",alias:"Overhead Hazards",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"hard_hat_required",alias:"Hard hat required?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"gas_monitor_confined",alias:"Gas Monitor",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"full_body_harness_confined",alias:"Full Body Harness",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"lockout_tagout_confined",alias:"Lockout/Tagout",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"communication_devices_confined",alias:"Communication Devices",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"lifeline_confined",alias:"Lifeline",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"retrieval_device_confined",alias:"Retrieval device",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"ventilation_confined",alias:"Ventilation",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"monitoring_confined",alias:"Monitoring",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"confined_space_communicated",alias:"Have all potential hazards been communicated with employees, and mitigated prior to entry?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"confined_space_type",alias:"What type of confined space are you entering?",type:"esriFieldTypeString",nullable:!0,editable:!0,length:1e3,defaultValue:null},{name:"confined_space_required",alias:"Do operations require entry into a confined space?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"hazard_mitigations",alias:"What Mitigations were used for the hazards?",type:"esriFieldTypeString",nullable:!0,editable:!0,length:1e3,defaultValue:null},{name:"heat_excavation",alias:"Heat",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"overhead_powerlines_excavation",alias:"Overhead Powerlines",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"accumulating_water_excavation",alias:"Accumulating Water",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"public_access_excavation",alias:"Public Access",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"weather_conditions_excavation",alias:"Weather Conditions",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"soil_instability_excavation",alias:"Soil instability",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"underground_utility_excavation",alias:"Underground Utilities",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"hazardous_atmosphere_excavation",alias:"Hazardous Atmospheres",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"falling_objects_excavation",alias:"Falling Objects",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"cave_ins_excavation",alias:"Cave-ins",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"excavation_hazards_present",alias:"Are excavation hazards present?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"excavation_depth",alias:"What is the anticipated depth of the excavation?",type:"esriFieldTypeDouble",nullable:!0,editable:!0,defaultValue:null},{name:"reason_811",alias:"If no, explain why",type:"esriFieldTypeString",nullable:!0,editable:!0,length:1e3,defaultValue:null},{name:"reponse_811",alias:"Has a positive response been checked and confirmed and were the observations communicated to employees before digging?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"automatic_flagger_traffic",alias:"Automatic flagger",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"flagger_traffic",alias:"Flagger",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"message_board_traffic",alias:"Message board",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"arrow_board_traffic",alias:"Arrow board",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"signs_traffic",alias:"Signs",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"cones_traffic",alias:"Cones",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"tempory_traffic_controls",alias:"Are temporary traffic controls used in work zone?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"blocking_vehicles_workzone",alias:"Blocking Vehicles",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"crash_attenuator_workzone",alias:"Crash Attenuator",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"road_closure_workzone",alias:"Road Closure",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"lane_closure_workzone",alias:"Lane Closure",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"shoulder_work_workzone",alias:"Shoulder Work",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"impacting_traffic",alias:"Are you impacting traffic?",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"ncdot_drawings",alias:"NCDOT Standardized Drawings",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"flipbook",alias:"Work Zone Safety Awareness Flipbook",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es},{name:"mutcd",alias:"MUTCD",type:"esriFieldTypeString",nullable:!0,editable:!0,defaultValue:"No",length:3,domain:es}],ed=(e=>{let a={};return e.forEach(e=>{let t;switch(e.type){case"esriFieldTypeString":t=s.z.string({invalid_type_error:"".concat(e.alias," must be a string.")}),e.length&&(t=t.max(e.length,"".concat(e.alias," cannot exceed ").concat(e.length," characters.")));break;case"esriFieldTypeInteger":case"esriFieldTypeSmallInteger":t=s.z.number({required_error:"".concat(e.alias," is required."),invalid_type_error:"".concat(e.alias," must be a number.")}).int("".concat(e.alias," must be an integer."));break;case"esriFieldTypeDouble":t=s.z.number({required_error:"".concat(e.alias," is required."),invalid_type_error:"".concat(e.alias," must be a number.")});break;case"esriFieldTypeDate":t=s.z.date({required_error:"".concat(e.alias," is required."),invalid_type_error:"".concat(e.alias," must be a valid date.")});break;case"esriFieldTypeOID":t=s.z.number().int();break;case"esriFieldTypeGlobalID":t=s.z.string().uuid();break;default:t=s.z.any()}if("signature"===e.name)t=s.z.string({required_error:"Signature is required."}).min(1,"Signature is required.");else if(e.nullable)t=t.nullable().optional();else{var r;"esriFieldTypeString"!==e.type||"workorderid"===e.name||(null==(r=t._def.checks)?void 0:r.find(e=>"min"===e.kind))||(t=t.min(1,"".concat(e.alias," is required.")))}if(e.domain&&e.domain.length>0&&"esriFieldTypeString"===e.type&&"signature"!==e.name){let a=e.domain.map(e=>String(e.value));if(a.length>0){let r=s.z.enum(a,{errorMap:(a,t)=>a.code===s.z.ZodIssueCode.invalid_enum_value?{message:"".concat(e.alias," has an invalid value.")}:{message:t.defaultError}});t=e.nullable?r.nullable().optional():r}}"workorderid"===e.name&&(t=s.z.string({required_error:"".concat(e.alias," is required."),invalid_type_error:"".concat(e.alias," must be a string.")}).min(1,"".concat(e.alias," is required.")),e.nullable&&(t=t.optional().nullable())),e.editable||"objectid"===e.name||"workorderid"===e.name||(t=s.z.any().optional()),a[e.name]=t}),a.objectid?a.objectid=a.objectid.optional().nullable():a.objectid=s.z.number().int().optional().nullable(),s.z.object(a)})(eo);var ec=t(87481);let eu=[{controllerField:"impacting_traffic",groupTitle:"Mitigation Techniques (Workzone)",dependentFields:["shoulder_work_workzone","lane_closure_workzone","road_closure_workzone","crash_attenuator_workzone","blocking_vehicles_workzone"]},{controllerField:"tempory_traffic_controls",groupTitle:"Temporary Traffic Controls Used",dependentFields:["cones_traffic","signs_traffic","arrow_board_traffic","message_board_traffic","flagger_traffic","automatic_flagger_traffic"]},{controllerField:"excavation_hazards_present",groupTitle:"Present Hazards (Excavation)",dependentFields:["cave_ins_excavation","falling_objects_excavation","hazardous_atmosphere_excavation","underground_utility_excavation","soil_instability_excavation","weather_conditions_excavation","public_access_excavation","accumulating_water_excavation","overhead_powerlines_excavation","heat_excavation","hazard_mitigations"]},{controllerField:"confined_space_required",groupTitle:"Confined Space Operations",dependentFields:["confined_space_type","confined_space_communicated","monitoring_confined","ventilation_confined","retrieval_device_confined","lifeline_confined","communication_devices_confined","lockout_tagout_confined","full_body_harness_confined","gas_monitor_confined"]},{controllerField:"hard_hat_required",groupTitle:"Actions Requiring Hard Hat",dependentFields:["overhead_hazards_hard_hat","excavations_hard_hat","trenching_hard_hat","overhead_powerlines_hard_hat","construction_sites_hard_hat","flagging_hard_hat"]},{controllerField:"safety_vests_required",groupTitle:"Actions Requiring Safety Vest",dependentFields:["on_the_road_vest","near_road_vest","extra_visibility_vest"]},{controllerField:"eye_protection_required",groupTitle:"Actions Requiring Eye Protection",dependentFields:["chipping_eye","grinding_eye","machining_eye","masonry_work_eye","drilling_eye","chiseling_eye","riveting_eye","powered_fastening_eye","straw_blowing_eye","sanding_eye","moving_dirt_eye"]},{controllerField:"hearing_protection_required",groupTitle:"Actions Requiring Hearing Protection",dependentFields:["vacuum_equipment_hear","flushing_trucks_hear","jackhammers_hear","wheel_saws_hear","hydraulic_chain_saws_hear","excavator_jackhammers_hear","tamps_hear"]},{controllerField:"respiration_required",groupTitle:"Actions Requiring Respiration",dependentFields:["concrete_silica_resp","ac_pipe_asbestos_resp","asphalt_oil_vapors_resp"]}],em=["mutcd","flipbook","ncdot_drawings"],ep=l.forwardRef((e,a)=>{let{formData:t,fieldDefinitions:l}=e;if(!t)return(0,r.jsx)("div",{ref:a,children:"No data to display."});let i=e=>l.find(a=>a.name===e),n=e=>{var a;return(null==(a=i(e))?void 0:a.alias)||e},s=e=>{var a;let r=t[e],l=i(e);if(null==r)return"N/A";if(r instanceof Date)return(0,M.GP)(r,"MM/dd/yyyy HH:mm");if((null==l?void 0:l.type)==="esriFieldTypeDouble"&&"number"==typeof r)return r.toString();if(null==l||null==(a=l.domain)?void 0:a.some(e=>"Yes"===e.value||"No"===e.value)){if(!0===r||1===r||"1"===String(r).toLowerCase())return"Yes";if(!1===r||0===r||"0"===String(r).toLowerCase())return"No";if("Yes"===r||"No"===r)return r}return String(r)},o=new Set(eu.map(e=>e.controllerField)),d=new Set(eu.flatMap(e=>e.dependentFields)),c=l.filter(e=>"signature"!==e.name&&!o.has(e.name)&&!d.has(e.name)&&!em.includes(e.name)&&!["objectid","globalid","created_user","created_date","last_edited_user","last_edited_date"].includes(e.name)).map(e=>e.name),u=e=>(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-1 py-0.5 text-xs",children:[(0,r.jsxs)("span",{className:"font-medium break-words",children:[n(e),":"]}),(0,r.jsx)("span",{className:"text-right break-words",children:s(e)})]},e),m=l.find(e=>"signature"===e.name);return(0,r.jsxs)("div",{ref:a,id:"printable-area",className:"p-2 bg-white text-black font-sans",style:{width:"210mm",minHeight:"297mm",boxSizing:"border-box"},children:[(0,r.jsx)("style",{type:"text/css",children:"\n            @media print {\n              body * {\n                visibility: hidden;\n              }\n              #printable-area, #printable-area * {\n                visibility: visible;\n              }\n              #printable-area {\n                position: absolute;\n                left: 0;\n                top: 0;\n                width: 100%; /* A4 width */\n                height: 100%; /* A4 height */\n                margin: 0;\n                padding: 10mm; /* Margins for printing */\n                box-sizing: border-box;\n              }\n            }\n          "}),(0,r.jsxs)("div",{className:"text-center mb-2",children:[(0,r.jsx)("h1",{className:"text-base font-bold",children:"Work Order Safety Form"}),(0,r.jsxs)("p",{className:"text-xs",children:["Work Order ID: ",(0,r.jsx)("span",{className:"font-semibold",children:s("workorderid")})]}),(0,r.jsxs)("p",{className:"text-xs",children:["Report Date: ",(0,r.jsx)("span",{className:"font-semibold",children:s("report_date")})]}),(0,r.jsxs)("p",{className:"text-xs",children:["Competent Person: ",(0,r.jsx)("span",{className:"font-semibold",children:s("competent_person")})]})]}),(0,r.jsxs)("div",{className:"mb-2 p-1 border",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold mb-1 text-center bg-gray-100",children:"General Information"}),c.map(e=>u(e))]}),(0,r.jsxs)("div",{className:"mb-2 p-1 border",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold mb-1 text-center bg-gray-100",children:"Work Zone Setup Reference"}),em.map(e=>u(e))]}),eu.map(e=>(0,r.jsxs)("div",{className:"mb-2 p-1 border",children:[(0,r.jsx)("div",{className:"bg-gray-100 p-0.5",children:u(e.controllerField)}),"Yes"===t[e.controllerField]&&(0,r.jsxs)("div",{className:"pl-2 mt-1",children:[(0,r.jsx)("h4",{className:"text-xs font-medium italic",children:e.groupTitle}),e.dependentFields.map(e=>u(e))]})]},e.controllerField)),(0,r.jsxs)("div",{className:"mb-2 p-1 border",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold mb-1 text-center bg-gray-100",children:"Environmental Factors"}),u("severe_weather"),u("low_temperatures"),u("high_temperatures")]}),(0,r.jsxs)("div",{className:"mb-2 p-1 border",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold mb-1 text-center bg-gray-100",children:"Agreement"}),u("agree")]}),m&&(0,r.jsxs)("div",{className:"mt-2 p-1 border",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold mb-1 text-center bg-gray-100",children:n(m.name)}),(0,r.jsx)("p",{className:"text-xs break-all",children:s("signature")||"N/A"})]})]})});ep.displayName="PrintableView";var ef=t(26597),eg=t(52699),eh=t.n(eg);let eb=[{controllingField:"impacting_traffic",conditionValue:"Yes",dependentFields:["shoulder_work_workzone","lane_closure_workzone","road_closure_workzone","crash_attenuator_workzone","blocking_vehicles_workzone"]},{controllingField:"tempory_traffic_controls",conditionValue:"Yes",dependentFields:["cones_traffic","signs_traffic","arrow_board_traffic","message_board_traffic","flagger_traffic","automatic_flagger_traffic"]},{controllingField:"excavation_hazards_present",conditionValue:"Yes",dependentFields:["cave_ins_excavation","falling_objects_excavation","hazardous_atmosphere_excavation","underground_utility_excavation","soil_instability_excavation","weather_conditions_excavation","public_access_excavation","accumulating_water_excavation","overhead_powerlines_excavation","heat_excavation","hazard_mitigations"]},{controllingField:"confined_space_required",conditionValue:"Yes",dependentFields:["confined_space_type","confined_space_communicated","monitoring_confined","ventilation_confined","retrieval_device_confined","lifeline_confined","communication_devices_confined","lockout_tagout_confined","full_body_harness_confined","gas_monitor_confined"]},{controllingField:"hard_hat_required",conditionValue:"Yes",dependentFields:["overhead_hazards_hard_hat","excavations_hard_hat","trenching_hard_hat","overhead_powerlines_hard_hat","construction_sites_hard_hat","flagging_hard_hat"]},{controllingField:"safety_vests_required",conditionValue:"Yes",dependentFields:["on_the_road_vest","near_road_vest","extra_visibility_vest"]},{controllingField:"eye_protection_required",conditionValue:"Yes",dependentFields:["chipping_eye","grinding_eye","machining_eye","masonry_work_eye","drilling_eye","chiseling_eye","riveting_eye","powered_fastening_eye","straw_blowing_eye","sanding_eye","moving_dirt_eye"]},{controllingField:"hearing_protection_required",conditionValue:"Yes",dependentFields:["vacuum_equipment_hear","flushing_trucks_hear","jackhammers_hear","wheel_saws_hear","hydraulic_chain_saws_hear","excavator_jackhammers_hear","tamps_hear"]},{controllingField:"respiration_required",conditionValue:"Yes",dependentFields:["concrete_silica_resp","ac_pipe_asbestos_resp","asphalt_oil_vapors_resp"]}],ey=eo.filter(e=>e.domain&&e.domain.some(e=>"Yes"===e.value)&&e.domain.some(e=>"No"===e.value)).map(e=>e.name);function ex(e){let{initialData:a,fieldDefinitions:t,onSubmit:s,onUploadAttachment:o,isLoading:p,isUploadingAttachment:f,formKey:g}=e,{toast:h}=(0,ec.dj)(),[b,y]=l.useState(null),N=l.useRef(null),j=l.useRef(null),[k,D]=l.useState(!1),[C,I]=l.useState(!1),[U,Z]=l.useState(!1),$=l.useMemo(()=>{if(!a)return;let e={};return t.forEach(t=>{let r=a[t.name];if("esriFieldTypeDate"===t.type&&r)try{e[t.name]="string"==typeof r?(0,L.H)(r):new Date(r)}catch(a){console.warn("Invalid date string for ".concat(t.name,": ").concat(r)),e[t.name]=null}else ey.includes(t.name)?1===r||!0===r||"true"===String(r).toLowerCase()||"1"===String(r)?e[t.name]="Yes":0===r||!1===r||"false"===String(r).toLowerCase()||"0"===String(r)?e[t.name]="No":e[t.name]=void 0===r?null:r:e[t.name]=void 0===r?null:r}),e},[a,t]),K=(0,n.mN)({resolver:(0,i.u)(ed),defaultValues:$||ed.cast({})});l.useEffect(()=>{$?(K.reset($),I(!!$.signature)):(K.reset(ed.cast({})),I(!1))},[$,K,g]);let Q=l.useMemo(()=>eb.map(e=>e.controllingField),[]),es=K.watch(Q);l.useEffect(()=>{eb.forEach(e=>{K.getValues(e.controllingField)!==e.conditionValue&&e.dependentFields.forEach(e=>{var a;let t=eo.find(a=>a.name===e),r=t?(null==(a=t.domain)?void 0:a.some(e=>"Yes"===e.value||"No"===e.value))?"No":t.defaultValue:null;K.getValues(e)!==r&&K.setValue(e,r,{shouldValidate:!0,shouldDirty:!0})})})},[K,es]);let eu=async e=>{try{let a={...e};t.forEach(e=>{"esriFieldTypeDate"===e.type&&a[e.name]instanceof Date&&(a[e.name]=a[e.name].toISOString())}),await s(a)}catch(e){console.error("Submission error in WorkOrderForm:",e),h({variant:"destructive",title:"Submission Failed",description:"An unexpected error occurred. Please try again."})}},em=async()=>{b?(await o(b),y(null),N.current&&(N.current.value="")):h({variant:"destructive",title:"No File Selected",description:"Please select a file to upload."})},eg=async()=>{if(!j.current||!a)return void h({variant:"destructive",title:"Print Error",description:"No data to print or printable area not found."});D(!0);try{let e=(await eh()(j.current,{scale:2,useCORS:!0,logging:!0})).toDataURL("image/jpeg",.7),t=new ef.Ay({orientation:"p",unit:"mm",format:"a4"}),r=t.internal.pageSize.getWidth(),l=t.internal.pageSize.getHeight(),i=t.getImageProperties(e),n=i.width,s=i.height,o=n/s,d=r,c=d/o;c>l&&(d=(c=l)*o);let u=(r-d)/2,m=(l-c)/2;t.addImage(e,"JPEG",u,m,d,c,void 0,"MEDIUM"),t.save("work_order_".concat(a.workorderid||"details",".pdf"))}catch(e){console.error("Error generating PDF:",e),h({variant:"destructive",title:"PDF Generation Failed",description:"Could not generate PDF."})}finally{D(!1)}},ex=e=>{for(let a of eb)if(a.dependentFields.includes(e))return K.getValues(a.controllingField)===a.conditionValue;return!0},e_=e=>{if(!e.editable&&"signature"!==e.name&&"workorderid"!==e.name||"workorderid"===e.name||!ex(e.name)&&"signature"!==e.name)return null;let a=C||p;return(0,r.jsx)(u.zB,{control:K.control,name:e.name,render:t=>{let l,{field:i}=t,n={id:e.name,"aria-label":e.alias,"aria-describedby":"".concat(e.name,"-message"),disabled:a},s=ey.includes(e.name);return(l=s?(0,r.jsx)(u.MJ,{children:(0,r.jsx)(G,{checked:"Yes"===i.value,onCheckedChange:e=>i.onChange(e?"Yes":"No"),...n})}):"esriFieldTypeDate"===e.type?(0,r.jsxs)(T,{children:[(0,r.jsx)(V,{asChild:!0,children:(0,r.jsx)(u.MJ,{children:(0,r.jsxs)(d.$,{variant:"outline",className:(0,x.cn)("w-full justify-start text-left font-normal",!i.value&&"text-muted-foreground"),...n,children:[(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4"}),i.value?(0,M.GP)(new Date(i.value),"PPP"):(0,r.jsx)("span",{children:"Pick a date"})]})})}),(0,r.jsx)(A,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(E,{mode:"single",selected:i.value?new Date(i.value):void 0,onSelect:e=>i.onChange(e),disabled:a||(e=>e<new Date("1900-01-01")),initialFocus:!0})})]}):e.domain&&e.domain.length>0?(0,r.jsxs)(_,{onValueChange:i.onChange,value:i.value||void 0,defaultValue:e.defaultValue||void 0,disabled:a,children:[(0,r.jsx)(u.MJ,{children:(0,r.jsx)(w,{...n,children:(0,r.jsx)(v,{placeholder:"Select ".concat(e.alias)})})}),(0,r.jsx)(S,{children:e.domain.map(e=>(0,r.jsx)(F,{value:String(e.value),children:e.name},String(e.value)))})]}):"esriFieldTypeInteger"===e.type||"esriFieldTypeSmallInteger"===e.type||"esriFieldTypeDouble"===e.type?(0,r.jsx)(u.MJ,{children:(0,r.jsx)(c.p,{type:"number",placeholder:e.alias,...i,...n,value:null===i.value||void 0===i.value?"":String(i.value),onChange:a=>i.onChange(""===a.target.value?null:"esriFieldTypeDouble"===e.type?parseFloat(a.target.value):parseInt(a.target.value,10))})}):(0,r.jsx)(u.MJ,{children:(0,r.jsx)(c.p,{type:"text",placeholder:e.alias,...i,...n,value:null===i.value||void 0===i.value?"":String(i.value)})}),s)?(0,r.jsxs)(u.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,r.jsx)("div",{className:"space-y-0.5",children:(0,r.jsx)(u.lR,{htmlFor:e.name,className:"text-base",children:e.alias})}),l,(0,r.jsx)(u.C5,{id:"".concat(e.name,"-message"),className:"col-span-full mt-1"})]}):(0,r.jsxs)(u.eI,{className:"flex flex-col",children:[(0,r.jsx)(u.lR,{htmlFor:e.name,children:e.alias}),l,(0,r.jsx)(u.C5,{id:"".concat(e.name,"-message")})]})}},e.name)};if(!a)return(0,r.jsxs)(m.Zp,{className:"w-full shadow-lg max-w-4xl",children:[(0,r.jsx)(m.aR,{children:(0,r.jsx)(m.ZB,{className:"text-2xl font-headline",children:"Work Order Details"})}),(0,r.jsx)(m.Wu,{children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Search for a Work Order ID to view and edit details."})})]});let ev=t.find(e=>"signature"===e.name),ew=e=>!!e.editable&&"signature"!==e.name&&"workorderid"!==e.name&&!eb.some(a=>a.controllingField===e.name||a.dependentFields.includes(e.name)),eN=t.filter(e=>ew(e)&&!ey.includes(e.name)),ej=t.filter(e=>ew(e)&&ey.includes(e.name));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:(0,r.jsx)(ep,{ref:j,formData:K.getValues(),fieldDefinitions:t})}),(0,r.jsxs)(m.Zp,{className:"w-full shadow-lg max-w-4xl",children:[(0,r.jsxs)(m.aR,{children:[(0,r.jsxs)(m.ZB,{className:"text-2xl font-headline",children:["Work Order: ",a.workorderid]}),(0,r.jsxs)(m.BT,{children:["Edit the details for this work order. ",C&&(0,r.jsx)("span",{className:"text-destructive font-semibold",children:"(Locked)"})]})]}),(0,l.createElement)(u.lV,{...K,key:g},(0,r.jsxs)("form",{onSubmit:K.handleSubmit(eu),children:[" ",(0,r.jsxs)(m.Wu,{className:"pt-2 space-y-6",children:[(0,r.jsx)(Y,{type:"multiple",defaultValue:["general-information"],children:(0,r.jsxs)(H,{value:"general-information",children:[(0,r.jsx)(J,{className:"text-xl font-semibold hover:no-underline",children:"General Information"}),(0,r.jsxs)(B,{className:"pt-4",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-8",children:eN.map(e=>e_(e))}),(0,r.jsx)("div",{className:"mt-6 space-y-4",children:ej.map(e=>e_(e))})]})]})},"main-sections-accordion"),(0,r.jsx)("div",{className:"space-y-4 rounded-lg border p-4 shadow-sm",children:eb.map((e,a)=>{let l=t.find(a=>a.name===e.controllingField);if(!l||!l.editable)return null;let i=K.watch(e.controllingField);return(0,r.jsxs)("div",{className:(0,x.cn)("pb-4",a<eb.length-1&&"border-b"),children:[e_(l),"Yes"===i&&(0,r.jsx)("div",{className:"mt-4 pl-4 border-l-2 border-muted space-y-4",children:e.dependentFields.map(e=>{let a=t.find(a=>a.name===e&&a.editable);return a?e_(a):null})})]},e.controllingField)})}),ev&&ev.editable&&(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Signature"}),e_(ev)]})]}),(0,r.jsxs)(m.wL,{className:"pt-6 flex flex-col items-stretch gap-4 border-t",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch gap-2 w-full",children:[(0,r.jsx)(c.p,{type:"file",id:"attachmentFile",ref:N,onChange:e=>{e.target.files&&e.target.files[0]?y(e.target.files[0]):y(null)},className:"w-full h-9 py-1.5 px-3 text-sm flex-grow","aria-label":"Attachment file",disabled:C||f}),(0,r.jsxs)(d.$,{type:"button",variant:"outline",size:"sm",onClick:em,disabled:C||!b||f||!(null==a?void 0:a.objectid),className:"w-full sm:w-auto",children:[f?(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(O.A,{className:"mr-2 h-4 w-4"}),"Upload Attachment"]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch gap-2 w-full",children:[(0,r.jsxs)(d.$,{type:"button",variant:"outline",size:"sm",onClick:eg,disabled:p||k,className:"w-full sm:w-auto flex-grow",children:[k?(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(P.A,{className:"mr-2 h-4 w-4"}),"Print to PDF"]}),(0,r.jsx)(d.$,{type:"button",size:"sm",onClick:()=>{K.trigger().then(e=>{e?Z(!0):h({variant:"destructive",title:"Validation Error",description:"Please correct the errors in the form before submitting."})})},disabled:C||p,className:"w-full sm:w-auto bg-accent hover:bg-accent/90 text-accent-foreground flex-grow",children:p?(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Submit Changes"]})})]})]})]}))]}),(0,r.jsx)(X,{open:U,onOpenChange:Z,children:(0,r.jsxs)(ee,{children:[(0,r.jsxs)(ea,{children:[(0,r.jsxs)(er,{children:[(0,r.jsx)(W.A,{className:"inline-block mr-2 h-5 w-5 text-destructive"})," Confirm Submission"]}),(0,r.jsx)(el,{children:"The signature field is required. Once submitted with a signature, this form cannot be edited further. Are you sure you want to proceed?"})]}),(0,r.jsxs)(et,{children:[(0,r.jsx)(en,{children:"Cancel"}),(0,r.jsx)(ei,{onClick:async()=>{Z(!1),await K.handleSubmit(eu)()},children:"Confirm & Submit"})]})]})})]})}var e_=t(23464);let ev="https://maps.raleighnc.gov/hosted/rest/services/Hosted/Raleigh_Water_Hazard_Form/FeatureServer/0",ew=e=>!!e&&e.some(e=>"Yes"===e.value)&&e.some(e=>"No"===e.value);async function eN(e,a){console.log("API: Fetching data for workorderid: ".concat(e));try{let t=new URLSearchParams({where:"workorderid = '".concat(e,"'"),outFields:"*",f:"json",token:a}),r=await e_.A.get("".concat(ev,"/query?").concat(t.toString()));if(r.data&&r.data.features&&r.data.features.length>0){let e=r.data.features[0].attributes;return eo.forEach(a=>{let t=a.name,r=e[t];if("esriFieldTypeDate"===a.type&&r){if("number"==typeof r)e[t]=new Date(r).toISOString();else if("string"==typeof r)try{e[t]=new Date(r).toISOString()}catch(a){console.warn("Invalid date string for ".concat(t," from service: ").concat(r)),e[t]=null}}else ew(a.domain)&&(1===r||!0===r||"true"===String(r).toLowerCase()||"1"===String(r)?e[t]="Yes":0===r||!1===r||"false"===String(r).toLowerCase()||"0"===String(r)?e[t]="No":"Yes"!==r&&"No"!==r&&null!=r&&(console.warn("Unexpected value for Yes/No field ".concat(t,": ").concat(r,'. Defaulting to "No" or nullable default.')),e[t]=a.nullable?null:"No"))}),e}return null}catch(e){throw console.error("Error fetching work order data from service:",e),e_.A.isAxiosError(e)&&e.response&&console.error("Service error response:",e.response.data),e}}async function ej(e,a){var t,r;if(!e.objectid)return console.error("API: OBJECTID is missing, cannot update feature."),!1;console.log("API: Submitting data for OBJECTID: ".concat(e.objectid),e);let l={...e};eo.forEach(e=>{let a=e.name;if("esriFieldTypeDate"===e.type&&l[a])try{l[a]=new Date(l[a]).getTime()}catch(e){console.warn("Could not parse date for submission: ".concat(a," - ").concat(l[a])),l[a]=null}if(ew(e.domain)){let e=l[a];!0===e||1===e||"1"===String(e)?l[a]="Yes":(!1===e||0===e||"0"===String(e))&&(l[a]="No")}});let i=[{attributes:l}];try{let e=new URLSearchParams;e.append("updates",JSON.stringify(i)),e.append("f","json"),e.append("token",a);let r=await e_.A.post("".concat(ev,"/applyEdits"),e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(r.data&&r.data.updateResults&&r.data.updateResults.length>0){let e=r.data.updateResults[0];if(e.success)return console.log("API: Successfully updated OBJECTID: ".concat(e.objectId)),!0;throw console.error("API: Failed to update feature. Service error:",e.error),Error((null==(t=e.error)?void 0:t.description)||"Feature update failed at the service.")}throw console.error("API: Unexpected response format from applyEdits:",r.data),Error("Unexpected response format from applyEdits.")}catch(e){if(console.error("Error submitting work order data to service:",e),e_.A.isAxiosError(e)&&e.response){console.error("Service error response (applyEdits):",e.response.data);let a=null==(r=e.response.data)?void 0:r.error;if(a)throw Error(a.message||"Esri service error during applyEdits.")}if(e instanceof Error)throw e;throw Error("An unknown error occurred during data submission.")}}async function eS(e,a,t){console.log("API: Adding attachment to OBJECTID: ".concat(e));let r=new FormData;r.append("attachment",a),r.append("f","json"),r.append("token",t);try{let a=await e_.A.post("".concat(ev,"/").concat(e,"/addAttachment"),r,{headers:{"Content-Type":"multipart/form-data"}});if(a.data&&a.data.addAttachmentResult&&a.data.addAttachmentResult.success)return console.log("API: Attachment added successfully:",a.data.addAttachmentResult),a.data.addAttachmentResult;if(a.data&&a.data.error)throw console.error("API: Failed to add attachment. Service error:",a.data.error),Error(a.data.error.message||"Failed to add attachment.");throw console.error("API: Unexpected response format from addAttachment:",a.data),Error("Unexpected response format when adding attachment.")}catch(e){if(console.error("Error adding attachment to service:",e),e_.A.isAxiosError(e)&&e.response){var l;console.error("Service error response (addAttachment):",e.response.data);let a=null==(l=e.response.data)?void 0:l.error;if(a)throw Error(a.message||"Esri service error during addAttachment.")}if(e instanceof Error)throw e;throw Error("An unknown error occurred during attachment upload.")}}function eF(e){let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,x.cn)("animate-pulse rounded-md bg-muted",a),...t})}var ek=t(40283);function eT(){let[e,a]=l.useState(null),[t,i]=l.useState(null),[n,s]=l.useState(!1),[o,d]=l.useState(!1),[c,u]=l.useState(!1),[m,p]=l.useState([]),[g,h]=l.useState(Date.now().toString()),{toast:b}=(0,ec.dj)(),{currentUser:y}=(0,ek.A)();l.useEffect(()=>{p(eo)},[]);let x=async e=>{if(!(null==y?void 0:y.token)){b({variant:"destructive",title:"Authentication Error",description:"Cannot perform search without login."}),s(!1);return}s(!0),i(null),a(e),console.log("[WorkOrderFormContainer] Searching for Work Order ID: ".concat(e));try{let a=await eN(e,y.token);console.log("[WorkOrderFormContainer] Data received from fetchWorkOrderData:",a),a?(i(a),h(Date.now().toString()),b({title:"Data Loaded",description:"Successfully fetched data for Work Order ID: ".concat(e,".")})):b({variant:"destructive",title:"Not Found",description:"No data found for Work Order ID: ".concat(e,". Check ID and permissions.")})}catch(a){var t,r,l;console.error("[WorkOrderFormContainer] Error during fetchWorkOrderData:",a);let e=(null==(l=a.response)||null==(r=l.data)||null==(t=r.error)?void 0:t.message)||a.message||"Please check the ID or try again later.";b({variant:"destructive",title:"Search Failed",description:"Could not retrieve data. ".concat(e)})}finally{s(!1)}},_=async a=>{if(!e&&!a.workorderid)return void b({variant:"destructive",title:"Submission Error",description:"No Work Order ID is active or provided for submission."});if(!(null==y?void 0:y.token)){b({variant:"destructive",title:"Authentication Error",description:"Cannot submit data without login."}),d(!1);return}if(!(null==t?void 0:t.objectid)){b({variant:"destructive",title:"Submission Error",description:"Cannot submit data without a valid OBJECTID. Please search first."}),d(!1);return}d(!0);try{let r={...t,...a,workorderid:a.workorderid||e,objectid:t.objectid};await ej(r,y.token)?(b({title:"Submission Successful",description:"Data for Work Order ID: ".concat(r.workorderid," has been updated.")}),await x(r.workorderid)):b({variant:"destructive",title:"Submission Failed",description:"Could not submit data. The service reported an error or an issue occurred."})}catch(e){var r,l,i;console.error("Error submitting work order data:",e),b({variant:"destructive",title:"Submission Error",description:(null==(i=e.response)||null==(l=i.data)||null==(r=l.error)?void 0:r.message)||e.message||"An unexpected error occurred during submission."})}finally{d(!1)}},v=async e=>{if(!(null==t?void 0:t.objectid))return void b({variant:"destructive",title:"Upload Error",description:"No work order loaded to attach file to."});if(!(null==y?void 0:y.token))return void b({variant:"destructive",title:"Authentication Error",description:"Cannot upload attachment without login."});u(!0);try{let r=await eS(t.objectid,e,y.token);if(r.success)b({title:"Attachment Uploaded",description:'File "'.concat(e.name,'" has been attached to Work Order ID: ').concat(t.workorderid,".")});else{var a;throw Error((null==(a=r.error)?void 0:a.message)||"Attachment upload failed at the service.")}}catch(e){console.error("Error uploading attachment:",e),b({variant:"destructive",title:"Attachment Upload Failed",description:e.message||"An unexpected error occurred during attachment upload."})}finally{u(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto p-4 md:p-8 space-y-8 flex flex-col items-center",children:[(0,r.jsx)(f,{onSearch:x,isLoading:n}),n&&(0,r.jsx)(()=>(0,r.jsxs)("div",{className:"space-y-4 p-6 border rounded-lg shadow-md w-full max-w-4xl bg-card",children:[(0,r.jsx)(eF,{className:"h-8 w-3/4 mb-2"}),(0,r.jsx)(eF,{className:"h-6 w-1/2 mb-6"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(eF,{className:"h-4 w-1/3"}),(0,r.jsx)(eF,{className:"h-10 w-full"})]},a))}),(0,r.jsx)(eF,{className:"h-10 w-32 mt-6"})]}),{}),!n&&t&&m.length>0&&(0,r.jsx)(ex,{initialData:t,fieldDefinitions:m,onSubmit:_,onUploadAttachment:v,isLoading:o,isUploadingAttachment:c,formKey:g}),!n&&!t&&e&&(0,r.jsxs)("div",{className:"text-center text-muted-foreground p-8 mt-6 border rounded-lg shadow-md bg-card max-w-md w-full",children:[(0,r.jsxs)("p",{className:"text-lg",children:["No data found for Work Order ID: ",(0,r.jsx)("strong",{children:e}),"."]}),(0,r.jsx)("p",{children:"Please try a different ID or ensure the ID is correct and you have permissions."})]}),!n&&!e&&!t&&(0,r.jsx)("div",{className:"text-center text-muted-foreground p-8 mt-6 border rounded-lg shadow-md bg-card max-w-md w-full",children:(0,r.jsx)("p",{className:"text-lg",children:"Enter a Work Order ID above and click Search to load data."})})]})}var eV=t(35695),eA=t(33349);function eD(){let{logout:e,loading:a}=(0,ek.A)(),[t,i]=(0,l.useState)(!1),n=async()=>{i(!0);try{await e()}catch(e){console.error("Logout error from component:",e)}finally{i(!1)}};return(0,r.jsxs)(d.$,{onClick:n,variant:"outline",disabled:t||a,className:"whitespace-nowrap",children:[t||a?(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)(eA.A,{className:"mr-2 h-4 w-4"}),"Logout"]})}function eC(){let{currentUser:e,loading:a}=(0,ek.A)(),t=(0,eV.useRouter)();return((0,l.useEffect)(()=>{a||e||t.push("/login")},[e,a,t]),a)?(0,r.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center p-6 sm:p-24 bg-background",children:[(0,r.jsx)(R.A,{className:"h-12 w-12 sm:h-16 sm:w-16 animate-spin text-primary"}),(0,r.jsx)("p",{className:"mt-4 sm:mt-6 text-base sm:text-lg text-muted-foreground",children:"Loading application..."})]}):e?(0,r.jsxs)("main",{className:"flex-grow flex flex-col items-center justify-start py-6 sm:py-8 bg-background",children:[(0,r.jsxs)("header",{className:"w-full flex flex-col sm:flex-row justify-between items-center px-4 sm:px-8 mb-6 sm:mb-10",children:[(0,r.jsxs)("div",{className:"text-center sm:text-left mb-4 sm:mb-0",children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-headline font-bold text-primary",children:"Work Order Data Entry"}),(0,r.jsxs)("p",{className:"text-sm sm:text-md md:text-lg text-muted-foreground mt-1 md:mt-2 truncate max-w-xs sm:max-w-md md:max-w-full",children:["Logged in as: ",e.username]})]}),(0,r.jsx)(eD,{})]}),(0,r.jsx)("div",{className:"w-full px-4 sm:px-0",children:(0,r.jsx)(eT,{})})]}):(0,r.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center p-6 sm:p-24 bg-background",children:[(0,r.jsx)("p",{className:"mb-4 text-base sm:text-lg text-muted-foreground",children:"Redirecting to login..."}),(0,r.jsx)(R.A,{className:"h-10 w-10 sm:h-12 sm:w-12 animate-spin text-primary"}),(0,r.jsx)(d.$,{onClick:()=>t.push("/login"),className:"mt-4",children:"Go to Login"})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[930,316,264,198,635,168,441,684,358],()=>a(44921)),_N_E=e.O()}]);