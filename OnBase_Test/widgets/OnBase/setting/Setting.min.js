define(["dojo/_base/declare","dijit/_WidgetsInTemplateMixin","jimu/BaseWidgetSetting","dojo/Deferred","jimu/dijit/SimpleTable","dijit/form/ValidationTextBox","dijit/form/CheckBox","jimu/loaderplugins/jquery-loader!//code.jquery.com/jquery-1.11.0.min.js"],function(n,t,i,r){return n([i,t],{baseClass:"jimu-widget-OnBase-setting",startup:function(){this.inherited(arguments);this.setConfig(this.config)},setConfig:function(n){this.config=n;this.config&&(this.config.obServiceUrl&&this.serviceUrlTextBox.set("value",this.config.obServiceUrl),this.config.obJS_API_Path&&this.jsApiPathTextBox.set("value",this.config.obJS_API_Path),this.config.width&&this.widthTextBox.set("value",this.config.width),this.config.portalWidgetUrl&&this.portalWidgetUrlTextBox.set("value",this.config.portalWidgetUrl),console.log("OnBase-setting :: setConfig"))},getConfig:function(){this.config.obServiceUrl=this.serviceUrlTextBox.get("value");this.config.obJS_API_Path=this.jsApiPathTextBox.get("value");this.config.width=Number(this.widthTextBox.get("value"));this.config.portalWidgetUrl=this.portalWidgetUrlTextBox.get("value");$("#ob_div_working").show();var n=this._validateOBUrl();return $("#ob_div_working").hide(),console.log("OnBase-setting :: getConfig "+this.config.obServiceUrl),this.config},_validateOBUrl:function(){var t="/OB_WebAPI.min.js",i=this.serviceUrlTextBox.get("value"),r=this.portalWidgetUrlTextBox.get("value"),u=r!==""?r:"../"+this.jsApiPathTextBox.get("value"),n;return console.log("Require: "+u+t),n=$.Deferred(),require([u+t],function(t){var r=new t(i,!0,!0);r.clearInstance();r.getInstanceAsync().then(function(t){t.getConfiguredLayersAsync(!0).then(function(t){if(t===null||t===undefined||t===""){var r="OnBase-setting -  Error getting configured layers. The url "+i+" is likely correct, but check that there are";r+="no server side errors such as a login is required, etc.  ";r+="Ultimately, the true test will be once you deploy your WAB application and attempt to retrieve data from OnBase in a deployed environment.";console.warn(r);n.resolve(!1)}else n.resolve(!0),console.log("OnBase-setting  - ConfigLayers: "+JSON.stringify(t))})}).fail(console.warn("OnBase-setting  - OBWebAPI did not initialize."))}),n},_onBtnValidateOBClick:function(){var n=new r,i=this.serviceUrlTextBox.validate(),t;return i?(t=this._validateOBUrl(),t?n.resolve():n.reject()):n.reject(),n}})});